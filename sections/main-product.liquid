{%- assign shipping_estimator_block = section.blocks | where: 'type', 'shipping_estimator' | first -%}
{%- assign variant_selector_block = section.blocks | where: 'type', 'variant_selector' | first -%}
{%- assign buy_buttons_block = section.blocks | where: 'type', 'buy_buttons' | first -%}

{%- capture section_settings -%}
{
  "showShippingEstimator": {% if template == 'product.quick-viewa' or product.available == false %}false{% else %}true{% endif %},
  "showQuantitySelector": {{ variant_selector_block.settings.show_quantity_selector | json }},
  "showPaymentButton": {% if product.template_suffix == 'pre-order' %}false{% else %}{{ buy_buttons_block.settings.show_payment_button | json }}{% endif %},
  "showInventoryQuantity": {% if product.template_suffix != 'pre-order' %}{{ variant_selector_block.settings.show_inventory_quantity | json }}{% else %}false{% endif %},
  "lowInventoryThreshold": {{ variant_selector_block.settings.low_inventory_threshold | json }},
  "galleryTransitionEffect": {{ section.settings.carousel_effect | json }},
  "enableImageZoom": {% if template == 'product.quick-view' %}false{% else %}{{ section.settings.enable_image_zoom | json }}{% endif %},
  "zoomEffect": {{ section.settings.zoom_effect | json }},
  "enableVideoLooping": {{ section.settings.enable_video_looping | json }},
  "productOptions": {{ product.options | json | escape }},
  "enableHistoryState": {% if template == 'product.quick-view' %}false{% else %}true{% endif %},
  "infoOverflowScroll": {% if template == 'product.quick-view' %}false{% else %}true{% endif %},
  "isQuickView": {% if template == 'product.quick-view' %}true{% else %}false{% endif %}
}
{%- endcapture -%}

<section data-section-id="{{ section.id }}" data-section-type="product" data-section-settings='{{ section_settings }}'>
  {%- if template != 'product.quick-view' -%}
  {% for tag-customer in customer.tags %}
  {%if tag-customer == "caneditproduct" %}
  <div id="btn-edit" class="desktophide"  >
    <a href="https://bayland.myshopify.com/admin/products/{{product.id}}" class="button button--primary">Edit product</a>
  </div>
  {%endif%}
  {% endfor %} 
    <div class="container container--flush">
      <div class="page__sub-header">
        <nav aria-label="{{ 'general.breadcrumb.title' | t }}" class="breadcrumb">
          <ol class="breadcrumb__list" role="list">
            <li class="breadcrumb__item">
              <a class="breadcrumb__link link" href="{{ routes.root_url }}">{{ 'general.breadcrumb.home' | t }}</a> {%- render 'icon', icon: 'arrow-right' -%}
            </li>

            <li class="breadcrumb__item">
              {%- if collection -%}
                <a class="breadcrumb__link link" href="{{ collection.url }}">{{ collection.title }}</a> {%- render 'icon', icon: 'arrow-right' -%}
              {%- else -%}
                <a class="breadcrumb__link link" href="{{ routes.all_products_collection_url }}">{{- 'collection.general.all_products' | t -}}</a> {%- render 'icon', icon: 'arrow-right' -%}
              {%- endif -%}
            </li>

            <li class="breadcrumb__item">
              <span class="breadcrumb__link" aria-current="page">{{ product.title }}</span>
            </li>
          </ol>
        </nav>
        <div class="page__navigation">
          {% for tag-customer in customer.tags %}
          {%if tag-customer == "caneditproduct" %}
          <div id="btn-edit" style="float:right">
            <a href="https://bayland.myshopify.com/admin/products/{{product.id}}" class="button button--primary">Edit product</a>
          </div>
          {%endif%}
          {% endfor %} 
        </div>
      </div>

      <div class="product-block-list product-block-list--{{ section.settings.image_size }}">
        <div class="product-block-list__wrapper">
          {%- if product.media.size > 0 -%}
            <div class="product-block-list__item product-block-list__item--gallery">
              {% render 'product-gallery' %}
            </div>
          {%- endif -%}

          <div class="product-block-list__item product-block-list__item--info">
            {%- render 'product-info' -%}
          </div>

          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- comment -%}
              --------------------------------------------------------------------------------------
              DESCRIPTION
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- when 'description' -%}
                {%- if product.description != blank -%}
                  <div class="product-block-list__item product-block-list__item--description" {{ block.shopify_attributes }} style="display:none;">
                    <div class="card">
                      {%- if block.settings.display_mode == 'collapse' -%}
                        <button class="card__collapsible-button" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ section.id }}-{{ block.id }}">
                          <span class="card__title heading h3">{{ 'product.general.description' | t }}</span>
                          <span class="plus-button plus-button--large"></span>
                        </button>

                        <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                          <div class="card__collapsible-content">
                            <div class="rte text--pull">
                              {{ product.description | remove: 'data-section-type="product"' }}
                            </div>
                          </div>
                        </div>
                      {%- else -%}
                        <div class="card__header">
                          <h2 class="card__title heading h3">{{ 'product.general.description' | t }}</h2>
                        </div>

                        <div class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}" {% if block.settings.display_mode == 'view_more' %}aria-expanded="false"{% endif %}>
                          <div class="rte text--pull">
                            {{ product.description | remove: 'data-section-type="product"' }}
                          </div>

                          {%- if block.settings.display_mode == 'view_more' -%}
                            <button class="expandable-content__toggle">
                              <span class="expandable-content__toggle-icon"></span>
                              <span class="expandable-content__toggle-text" data-view-more="{{ 'product.general.view_more' | t | escape }}" data-view-less="{{ 'product.general.view_less' | t | escape }}">{{- 'product.general.view_more' | t -}}</span>
                            </button>
                          {%- endif -%}
                        </div>
                      {%- endif -%}
                    </div>
                  </div>
                {%- endif -%}

              {%- when 'content' -%}
                {%- comment -%}
                --------------------------------------------------------------------------------------
                CONTENT (we first check the page and then inline content)
                --------------------------------------------------------------------------------------
                {%- endcomment -%}

                {%- assign page = block.settings.page -%}

                {%- if page != blank -%}
                  {%- assign title = page.title -%}
                  {%- assign content = page.content -%}
                {%- else -%}
                  {%- assign title = block.settings.title -%}
                  {%- assign content = block.settings.content -%}
                {%- endif -%}

                {%- if title != blank and content != blank -%}
                  <div class="product-block-list__item product-block-list__item--content" {{ block.shopify_attributes }} style="display:none;">
                    <div class="card">
                      {%- if block.settings.display_mode == 'collapse' -%}
                        <button class="card__collapsible-button" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ section.id }}-{{ block.id }}">
                          <span class="card__title heading h3">{{ title }}</span>
                          <span class="plus-button plus-button--large"></span>
                        </button>

                        <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                          <div class="card__collapsible-content">
                            <div class="rte text--pull">
                              {{ content }}
                            </div>
                          </div>
                        </div>
                      {%- else -%}
                        <div class="card__header">
                          <h2 class="card__title heading h3">{{ title }}</h2>
                        </div>

                        <div class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}" {% if block.settings.display_mode == 'view_more' %}aria-expanded="false"{% endif %}>
                          <div class="rte text--pull">
                            {{ content }}
                          </div>

                          {%- if block.settings.display_mode == 'view_more' -%}
                            <button class="expandable-content__toggle">
                              <span class="expandable-content__toggle-icon"></span>
                              <span class="expandable-content__toggle-text" data-view-more="{{ 'product.general.view_more' | t | escape }}" data-view-less="{{ 'product.general.view_less' | t | escape }}">{{- 'product.general.view_more' | t -}}</span>
                            </button>
                          {%- endif -%}
                        </div>
                      {%- endif -%}
                    </div>
                  </div>
                {%- endif -%}

            {%- when 'liquid' -%}
              {%- comment -%}
              --------------------------------------------------------------------------------------
              LIQUID COE
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- assign title = block.settings.title -%}
              {%- assign liquid = block.settings.liquid -%}

              {%- if title != blank and liquid != blank -%}
                <div class="product-block-list__item product-block-list__item--content" {{ block.shopify_attributes }} style="display:none;">
                  <div class="card">
                    {%- if block.settings.display_mode == 'collapse' -%}
                      <button class="card__collapsible-button" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ section.id }}-{{ block.id }}">
                        <span class="card__title heading h3">{{ title }}</span>
                        <span class="plus-button plus-button--large"></span>
                      </button>

                      <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                        <div class="card__collapsible-content">
                          <div class="rte text--pull">
                            {{ liquid }}
                          </div>
                        </div>
                      </div>
                    {%- else -%}
                      <div class="card__header">
                        <h2 class="card__title heading h3">{{ title }}</h2>
                      </div>

                      <div class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}" {% if block.settings.display_mode == 'view_more' %}aria-expanded="false"{% endif %}>
                        <div class="rte text--pull">
                          {{ liquid }}
                        </div>

                        {%- if block.settings.display_mode == 'view_more' -%}
                          <button class="expandable-content__toggle">
                            <span class="expandable-content__toggle-icon"></span>
                            <span class="expandable-content__toggle-text" data-view-more="{{ 'product.general.view_more' | t | escape }}" data-view-less="{{ 'product.general.view_less' | t | escape }}">{{- 'product.general.view_more' | t -}}</span>
                          </button>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                  </div>
                </div>
              {%- endif -%}

              {%- comment -%}
              --------------------------------------------------------------------------------------
              REVIEWS
              --------------------------------------------------------------------------------------
              {%- endcomment -%}
              {%- when 'reviews' -%}
                <div class="product-block-list__item product-block-list__item--reviews" {{ block.shopify_attributes }} style="display:none;">
                  <span id="product-reviews" class="anchor"></span>

                  <div class="card">
                    <div class="card__section">
                      {%- assign reviews_count = product.metafields.spr.reviews | split: '<meta itemprop="reviewCount" content="' | last | split: '">' | first | times: 1 -%}
                      <div id="shopify-product-reviews" class="spr-reviews {% if reviews_count > 0 %}spr-reviews--has-reviews{% endif %}" data-id="{{ product.id }}">{{ product.metafields.spr.reviews }}</div>
                    </div>
                  </div>
                </div>

              {%- comment -%}
              --------------------------------------------------------------------------------------
              TRUST BADGE
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- when 'trust' -%}
                {%- if block.settings.show_payment_icons and shop.enabled_payment_types.size > 0 -%}
                  {%- assign show_payment_icons = true -%}
                {%- else -%}
                  {%- assign show_payment_icons = false -%}
                {%- endif -%}

                {%- if block.settings.custom_security_badge or show_payment_icons -%}
                  <div class="product-block-list__item product-block-list__item--trust" style="display:none;">
                    <div class="card">
                      <div class="card__header card__header--flex">
                        <h2 class="card__title heading h3">{{ block.settings.trust_title | escape }}</h2>

                        {%- render 'icon', icon: 'lock', width: 22, height: 24 -%}
                      </div>

                      <div class="card__section">
                        {%- if show_payment_icons -%}
                          {%- if block.settings.custom_security_badge -%}
                            <p class="card__subtitle heading h6">{{ 'product.general.payment' | t }}</p>
                          {%- endif -%}

                          <div class="payment-list">
                            {% for type in shop.enabled_payment_types %}
                              {{ type | payment_type_svg_tag: class: 'payment-list__item' }}
                            {% endfor %}
                          </div>

                          <p class="payment-list__notice">{{ 'product.general.payment_notice' | t }}</p>
                        {%- endif -%}

                        {%- if show_payment_icons and block.settings.custom_security_badge -%}
                          <hr class="card__separator">
                        {%- endif -%}

                        {%- if block.settings.custom_security_badge -%}
                          {%- if show_payment_icons -%}
                            <p class="card__subtitle heading h6">{{ 'product.general.security' | t }}</p>
                          {%- endif -%}

                          {%- assign badge_width = block.settings.custom_security_badge.width | at_most: 450 | append: 'x' -%}
                          <img class="product__trust-badge" style="width: {{ block.settings.custom_security_badge_width }}px"
                               src="{{ block.settings.custom_security_badge | img_url: badge_width }}"
                               srcset="{{ block.settings.custom_security_badge | img_url: badge_width }} 1x, {{ block.settings.custom_security_badge | img_url: badge_width, scale: 2 }} 2x"
                               alt="{{ block.settings.custom_security_badge.alt | escape }}">
                        {%- endif -%}
                      </div>
                    </div>
                  </div>
                {%- endif -%}

              {%- comment -%}
              --------------------------------------------------------------------------------------
              ESTIMATE SHIPPING
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- when 'shipping_estimator' -%}
          
                {% comment %}
          
                {%- if product.available -%}
                  <div class="product-block-list__item product-block-list__item--shipping" {{ block.shopify_attributes }}>
                    <div class="card">
                      <div class="card__header">
                        <h2 class="card__title heading h3">{{ 'product.general.estimate_shipping' | t }}</h2>
                      </div>

                      <div class="card__section">
                        <div class="shipping-estimator form" role="form">
                          <div class="form__input-row">
                            <div class="form__input-wrapper">
                              <label for="shipping-estimator-country" class="form__label">{{ 'cart.shipping_estimator.country' | t }}</label>

                              <div class="select-wrapper select-wrapper--primary">
                                {%- render 'icon', icon: 'arrow-bottom' -%}

                                <select name="country" id="shipping-estimator-country" data-default="{{ customer.default_address.country | default: block.settings.shipping_estimator_default_country }}" required>
                                  {{- country_option_tags -}}
                                </select>
                              </div>
                            </div>

                            <div class="form__input-wrapper" style="display: none">
                              <label for="shipping-estimator-province" class="form__label">{{ 'cart.shipping_estimator.province' | t }}</label>

                              <div class="select-wrapper select-wrapper--primary">
                                {%- render 'icon', icon: 'arrow-bottom' -%}

                                <select name="province" id="shipping-estimator-province" data-default="{{ customer.default_address.province }}"></select>
                              </div>
                            </div>

                            <div class="form__input-wrapper" style="max-width: 155px">
                              <label for="shipping-estimator-zip" class="form__label">{{ 'cart.shipping_estimator.zip_code' | t }}</label>
                              <input type="text" name="zip" id="shipping-estimator-zip" class="form__field form__field--text" value="{{ customer.default.address.zip }}" required>
                            </div>
                          </div>

                          <button type="button" class="form__submit button button--primary" data-action="estimate-shipping">{{ 'cart.shipping_estimator.estimate' | t }}</button>

                          <div class="shipping-estimator__results rte" style="display: none;"></div>
                        </div>
                      </div>

                      {%- if block.settings.show_refunds_policy and shop.refund_policy != blank -%}
                        <div class="card__section card__section--tight">
                          <button class="product__refund-policy-link link link--accented" data-action="open-modal" aria-controls="modal-refunds-policy">{{ 'product.general.refund_policy' | t }} {%- render 'icon', icon: 'arrow-right' -%}</button>
                        </div>
                      {%- endif -%}
                    </div>

                    {%- if block.settings.show_refunds_policy and shop.refund_policy != blank -%}
                      <div id="modal-refunds-policy" class="modal" aria-hidden="true" style="display:none">
                        <div class="modal__dialog" role="dialog">
                          <header class="modal__header">
                            <h3 class="modal__title heading h2">{{ 'product.general.refund_policy' | t }}</h3>
                            <button class="modal__close link" data-action="close-modal" title="{{ 'general.accessibility.close' | t | escape }}">
                              {%- render 'icon', icon: 'close' -%}
                            </button>
                          </header>

                          <div class="modal__content">
                            <div class="rte">
                              {{ shop.refund_policy }}
                            </div>
                          </div>
                        </div>
                      </div>
                    {%- endif -%}
                  </div>
                {%- endif -%}
          
                {% endcomment %}
            {%- endcase -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  {%- else -%}
    {%- comment -%}We display the quick view within the product template so we can re-use the same settings{%- endcomment -%}
    <div class="featured-product">
      {%- render 'product-gallery' -%}
      {%- render 'product-info' -%}
    </div>
  {%- endif -%}
  
{% unless product.tags contains 'custom_pagefly_content' %}
  
    {% assign techspecs_option = product.metafields.techspecs_option %}
    <div class="container pd_tabs_wrap ">
      <div class="product_tab_wrap">
        <nav class="non_profit_navbar"  id="nonProfit_nav">
          <ul class="non_profit_nav">
            <li><a href="#Overview" class="active">Overview</a></li>

            {% if techspecs_option.hide_techspecs != 'yes' %}
            <li class="tech-specs-word"><a href="#tech">Tech Specs</a></li>
            {% endif %}

            <li {% if product.metafields.stamped.reviews_count == blank %} style="display:none"{% endif %}class="revone"><a href="#review">Reviews</a></li>
            <li><a href="#estimate">Estimate Shipping</a></li>
          </ul>
        </nav>
      </div>

      <div>
        <div class="product_des_wrap" id="Overview">
          <div class="features">
            {{product.description | replace: "Barco", "Barco&reg;"}}
          </div>
        </div>
        {% if techspecs_option.hide_techspecs != 'yes' %}
        <div class="product_des_wrap" id="tech">
          <div class="tech_wrap">
            <h2>Tech Specs</h2>
            <div class="table-responsive">
              <table class="table">
                <tbody>
                  {% assign global = product.metafields.global %}
                  {% assign monitor = product.metafields.monitor %}
                  {% assign professional_monitor = product.metafields.monitor %}
                  {% assign workstation = product.metafields.workstation %}
                  {% assign film_digitizer = product.metafields.film_digitizer %}
                  {% assign graphic_card = product.metafields.graphic_card %}
                  {% assign reading_station = product.metafields.reading_station %}
                  {% assign power_adapters = product.metafields.power_adapters %}
                  {% assign dictation_mics = product.metafields.dictation_mics %}
                  {% if product.vendor != blank %}
                  <tr id="Manufacturer_hide">
                    <td>Manufacturer</td>
                    <td id="Manufacturer">{{ product.vendor | replace: "Barco", "Barco&reg;"}}</td>
                  </tr>
                  {% endif %}
                  {% if global.mfg_product_number != blank %}
                  <tr  id="mfg_hide">
                    <td>MFG. Product Number</td>
                    <td id="mfg">{{ global.mfg_product_number }}</td>
                  </tr>
                  {% endif %}

                  {% if product.type == 'Monitor' %}
                  {% if monitor.screen_type != blank %}
                  <tr id="Screen_Type_hide" >
                    <td>Screen Type</td>
                    <td id="Screen_Type">{{ monitor.screen_type | capitalize }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.resolution != blank %}
                  <tr id="Resolution_hide" >
                    <td>Resolution</td>
                    <td id="Resolution">{{ monitor.resolution }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.screen_technology != blank %}
                  <tr id="Screen_Technology_hide" >
                    <td>Screen Technology</td>
                    <td id="Screen_Technology">{{ monitor.screen_technology }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.backlight != blank %}
                  <tr id="Screen_Technology_hide" >
                    <td>Backlight</td>
                    <td id="Screen_Technology">{{ monitor.backlight }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.active_screen_size_hxv != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Active Screen Size (H x V)</td>
                    <td id="Active_Screen_Size">{{ monitor.active_screen_size_hxv }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.ambient_light_censor != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Ambient Light Sensor</td>
                    <td id="Active_Screen_Size">{{ monitor.ambient_light_censor }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.active_screen_size_diagonal != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Active Screen Size (DIAGONAL)</td>
                    <td id="Active_Screen_Size">{{ monitor.active_screen_size_diagonal }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.pixel_pitch != blank %}
                  <tr id="Pixel_Pitch_hide" >
                    <td>Pixel Pitch</td>
                    <td id="Pixel_Pitch">{{ monitor.pixel_pitch }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.viewing_angle_hv != blank %}
                  <tr id="Viewing_Angle_hide" >
                    <td>Viewing Angle (H, V)</td>
                    <td id="Viewing_Angle">{{ monitor.viewing_angle_hv }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.backlight_censor != blank %}
                  <tr id="Backlight_Censor_hide" >
                    <td>Backlight Censor</td>
                    <td id="Backlight_Censor">{{ monitor.backlight_censor }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.calibration != blank %}
                  <tr id="Calibration_hide" >
                    <td>Calibration</td>
                    <td id="Calibration">{{ monitor.calibration }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.calibrated_luminance != blank %}
                  <tr id="Calibrated_Luminance_hide" >
                    <td>Calibrated Luminance</td>
                    <td id="Calibrated_Luminance">{{ monitor.calibrated_luminance }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.max_luminance != blank %}
                  <tr id="Max_Luminance_hide" >
                    <td>Max Luminance</td>
                    <td id="Max_Luminance">{{ monitor.max_luminance }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.contrast_ratio != blank %}
                  <tr id="Contrast_Ratio_hide" >
                    <td>Contrast Ratio</td>
                    <td id="Contrast_Ratio">{{ monitor.contrast_ratio }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.power_consumption != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Power Consumption</td>
                    <td id="Active_Screen_Size">{{ monitor.power_consumption }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.video_input_signals != blank %}
                  <tr id="Video_Input_Signals_hide" >
                    <td>Video Input Signals</td>
                    <td id="Video_Input_Signals">{{ monitor.video_input_signals }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% if monitor.recommended_for != blank %}
                  <tr id="Recommended_For_hide" >
                    <td>Recommended For</td>
                    <td id="Recommended_For">{{ monitor.recommended_for }}</td>
                  </tr>
                  {% endif %}
                  {% endif%}

                  {% if product.type == 'Professional Monitor' %}
                  {% if professional_monitor.screen_type != blank %}
                  <tr id="Screen_Type_hide" >
                    <td>Screen Type</td>
                    <td id="Screen_Type">{{ professional_monitor.screen_type | capitalize }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.resolution != blank %}
                  <tr id="Resolution_hide" >
                    <td>Resolution</td>
                    <td id="Resolution">{{ professional_monitor.resolution }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.screen_technology != blank %}
                  <tr id="Screen_Technology_hide" >
                    <td>Screen Technology</td>
                    <td id="Screen_Technology">{{ professional_monitor.screen_technology }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.backlight != blank %}
                  <tr id="Screen_Technology_hide" >
                    <td>Backlight</td>
                    <td id="Screen_Technology">{{ professional_monitor.backlight }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.active_screen_size_hxv != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Active Screen Size (H x V)</td>
                    <td id="Active_Screen_Size">{{ professional_monitor.active_screen_size_hxv }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.ambient_light_censor != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Ambient Light Sensor</td>
                    <td id="Active_Screen_Size">{{ professional_monitor.ambient_light_censor }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.active_screen_size_diagonal != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Active Screen Size (DIAGONAL)</td>
                    <td id="Active_Screen_Size">{{ professional_monitor.active_screen_size_diagonal }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.pixel_pitch != blank %}
                  <tr id="Pixel_Pitch_hide" >
                    <td>Pixel Pitch</td>
                    <td id="Pixel_Pitch">{{ professional_monitor.pixel_pitch }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.viewing_angle_hv != blank %}
                  <tr id="Viewing_Angle_hide" >
                    <td>Viewing Angle (H, V)</td>
                    <td id="Viewing_Angle">{{ professional_monitor.viewing_angle_hv }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.backlight_censor != blank %}
                  <tr id="Backlight_Censor_hide" >
                    <td>Backlight Censor</td>
                    <td id="Backlight_Censor">{{ professional_monitor.backlight_censor }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.calibration != blank %}
                  <tr id="Calibration_hide" >
                    <td>Calibration</td>
                    <td id="Calibration">{{ professional_monitor.calibration }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.calibrated_luminance != blank %}
                  <tr id="Calibrated_Luminance_hide" >
                    <td>Calibrated Luminance</td>
                    <td id="Calibrated_Luminance">{{ professional_monitor.calibrated_luminance }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.max_luminance != blank %}
                  <tr id="Max_Luminance_hide" >
                    <td>Max Luminance</td>
                    <td id="Max_Luminance">{{ professional_monitor.max_luminance }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.contrast_ratio != blank %}
                  <tr id="Contrast_Ratio_hide" >
                    <td>Contrast Ratio</td>
                    <td id="Contrast_Ratio">{{ professional_monitor.contrast_ratio }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.power_consumption != blank %}
                  <tr id="Active_Screen_Size_hide" >
                    <td>Power Consumption</td>
                    <td id="Active_Screen_Size">{{ professional_monitor.power_consumption }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.video_input_signals != blank %}
                  <tr id="Video_Input_Signals_hide" >
                    <td>Video Input Signals</td>
                    <td id="Video_Input_Signals">{{ professional_monitor.video_input_signals }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% if professional_monitor.recommended_for != blank %}
                  <tr id="Recommended_For_hide" >
                    <td>Recommended For</td>
                    <td id="Recommended_For">{{ professional_monitor.recommended_for }}</td>
                  </tr>
                  {% endif %}
                  {% endif%}

                  {% if product.type == 'Workstation' %}
                  {% if workstation.processor != blank %}
                  <tr>
                    <td>Processor</td>
                    <td>{{ workstation.processor }}</td>
                  </tr>
                  {% endif %}
                  {% if workstation.memory != blank %}
                  <tr>
                    <td>Memory</td>
                    <td>{{ workstation.memory }}</td>
                  </tr>
                  {% endif %}
                  {% if workstation.storage != blank %}
                  <tr>
                    <td>Storage</td>
                    <td>{{ workstation.storage }}</td>
                  </tr>
                  {% endif %}
                  {% if workstation.graphics != blank %}
                  <tr>
                    <td>Graphics</td>
                    <td>{{ workstation.graphics }}</td>
                  </tr>
                  {% endif %}
                  {% if workstation.operating_system != blank %}
                  <tr>
                    <td>Operating System</td>
                    <td>{{ workstation.operating_system }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% endif%}

                  {% if product.type == 'Film Digitizer' %}
                  {% if film_digitizer.resolution != blank %}
                  <tr>
                    <td>Resolution</td>
                    <td>{{ film_digitizer.resolution }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.scan_rate != blank %}
                  <tr>
                    <td>Scan Rate</td>
                    <td>{{ film_digitizer.scan_rate }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.clinical_optical_density_range != blank %}
                  <tr>
                    <td>Clinical Optical Density Range</td>
                    <td>{{ film_digitizer.clinical_optical_density_range }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.mtbf != blank %}
                  <tr>                  
                    <td>MTBF</td>
                    <td>{{ film_digitizer.mtbf }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.film_sizes != blank %}
                  <tr>
                    <td>Film Sizes</td>
                    <td>{{ film_digitizer.film_sizes }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.auto_film_feeder != blank %}
                  <tr>
                    <td>Auto Film Feeder</td>
                    <td>{{ film_digitizer.auto_film_feeder }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.geometric_accuracy != blank %}
                  <tr>
                    <td>Geometric Accuracy</td>
                    <td>{{ film_digitizer.geometric_accuracy }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.hardware_interface != blank %}
                  <tr>
                    <td>Hardware Interface</td>
                    <td>{{ film_digitizer.hardware_interface }}</td>
                  </tr>
                  {% endif %}
                  {% if film_digitizer.recommended_for != blank %}
                  <tr>
                    <td>Recommended For</td>
                    <td>{{ film_digitizer.recommended_for }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% endif%}

                  {% if product.type == 'Graphic Card' %}
                  {% if graphic_card.gpu_memory != blank %}
                  <tr>
                    <td>GPU Memory</td>
                    <td>{{ graphic_card.gpu_memory }}</td>
                  </tr>
                  {% endif %}
                  {% if graphic_card.memory_interface != blank %}
                  <tr>
                    <td>Memory Interface</td>
                    <td>{{ graphic_card.memory_interface }}</td>
                  </tr>
                  {% endif %}
                  {% if graphic_card.memory_bandwidth != blank %}
                  <tr>
                    <td>Memory Bandwidth</td>
                    <td>{{ graphic_card.memory_bandwidth }}</td>
                  </tr>
                  {% endif %}
                  {% if graphic_card.power_consumption != blank %}
                  <tr>
                    <td>Power Consumption</td>
                    <td>{{ graphic_card.power_consumption }}</td>
                  </tr>
                  {% endif %}
                  {% if graphic_card.output_ports != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ graphic_card.output_ports }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% endif%}

                  {% if product.type == 'Dictation Mics'%}
                  {% if dictation_mics.type != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ dictation_mics.type }}</td>
                  </tr>
                  {% endif %}
                  {% if dictation_mics.connection != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ dictation_mics.connection }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% endif %}

                  {% if product.type == 'Power Adapter'%}
                  {% if power_adapters.ac_input != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ power_adapters.ac_input }}</td>
                  </tr>
                  {% endif %}
                  {% if power_adapters.dc_voltage_output != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ power_adapters.dc_voltage_output }}</td>
                  </tr>
                  {% endif %}
                  {% if power_adapters.dc_amperage_output != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ power_adapters.dc_amperage_output }}</td>
                  </tr>
                  {% endif %}
                  {% if power_adapters.connection_type != blank %}
                  <tr>
                    <td>Output Ports</td>
                    <td>{{ power_adapters.connection_type }}</td>
                  </tr>
                  {% endif %}
                  {% if global.weight != blank %}
                  <tr id="Weight_hide">
                    <td>Weight</td>
                    <td id="Weight">{{ global.weight }}</td>
                  </tr>
                  {% endif %}
                  {% endif%}
                  <tr id="landhere"></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        {% endif %}
        <div  class="product_des_wrap" id="review">
          <div class="review_wrap">
            <h2 {% if product.metafields.stamped.reviews_count == blank %} style="display:none"{% endif %}>Reviews</h2>
            <!--Start Stamped.io Auto Installation--><div {% if product.metafields.stamped.reviews_count == blank %} style="opacity:0;height:0;"{% endif %} id="stamped-main-widget" class="stamped-main-widget" data-widget-style="standard" data-product-id="{{ product.id }}" data-name="{{ product.title | escape }}" data-url="{{ shop.url }}{{ product.url }}" data-image-url="{{ product.featured_image | product_img_url: "large" |replace: '?', '%3F' | replace: '&','%26'}}" data-description="{{ product.description | escape }}" data-product-sku="{{product.handle}}" data-product-type="{{product.type}}" data-animation="false">{{ product.metafields.stamped.reviews }}</div><!--End Stamped.io Auto Installation-->
          </div>
        </div>
        {% comment %}
        <div class="product_des_wrap" id="estimate">
          <div class="">
            <h2>Estimate Shipping</h2>
            <div class="shipping-estimator form">
              <div class="form__input-row">
                <div class="form__input-wrapper">
                  <label for="shipping-estimator-country" class="form__label">{{ 'cart.shipping_estimator.country' | t }}</label>

                  <div class="select-wrapper select-wrapper--primary">
                    {%- render 'icon', icon: 'arrow-bottom' -%}

                    <select name="country" id="shipping-estimator-country" data-default="{{ customer.default_address.country | default: section.settings.shipping_estimator_default_country }}" required>
                      {{- country_option_tags -}}
                    </select>
                  </div>
                </div>

                <div class="form__input-wrapper">
                  <label for="shipping-estimator-province" class="form__label">State/Province</label>

                  <div class="select-wrapper select-wrapper--primary">
                    {%- render 'icon', icon: 'arrow-bottom' -%}

                    <select name="province" id="shipping-estimator-province" data-default="{{ customer.default_address.province }}"></select>
                  </div>
                </div>

                <div class="form__input-wrapper" >
                  <label for="shipping-estimator-zip" class="form__label">{{ 'cart.shipping_estimator.zip_code' | t }}</label>
                  <input type="text" name="zip" id="shipping-estimator-zip" class="form__field form__field--text" value="{{ customer.default.address.zip }}" required>
                </div>
                <button type="button" class="form__submit button button--primary" data-action="estimate-shipping">{{ 'cart.shipping_estimator.estimate' | t }}</button>
              </div>



              <div class="shipping-estimator__results rte" style="display: none;"></div>
            </div>
          </div>

        </div>
        {% endcomment %}

        <div class="card product_des_wrap" id="estimate">
          {%- if product.available -%}
          <div class="product-block-list__item product-block-list__item--shipping"  >
            <div class="card">
              <div class="card__header">
                <h2 class="card__title heading h3">{{ 'product.general.estimate_shipping' | t }}</h2>
              </div>

              <div class="card__section">
                <div class="shipping-estimator form">
                  <div class="form__input-row">
                    <div class="form__input-wrapper">
                      <label for="shipping-estimator-country" class="form__label">{{ 'cart.shipping_estimator.country' | t }}</label>

                      <div class="select-wrapper select-wrapper--primary">
                        {%- render 'icon', icon: 'arrow-bottom' -%}

                        <select name="country" id="shipping-estimator-country" data-default="{{ customer.default_address.country | default: section.settings.shipping_estimator_default_country }}" required>
                          {{- country_option_tags -}}
                        </select>
                      </div>
                    </div>

                    <div class="form__input-wrapper" style="display: none">
                      <label for="shipping-estimator-province" class="form__label">{{ 'cart.shipping_estimator.province' | t }}</label>

                      <div class="select-wrapper select-wrapper--primary">
                        {%- render 'icon', icon: 'arrow-bottom' -%}

                        <select name="province" id="shipping-estimator-province" data-default="{{ customer.default_address.province }}"></select>
                      </div>
                    </div>

                    <div class="form__input-wrapper" style="max-width: 155px">
                      <label for="shipping-estimator-zip" class="form__label">{{ 'cart.shipping_estimator.zip_code' | t }}</label>
                      <input type="text" name="zip" id="shipping-estimator-zip" class="form__field form__field--text" value="{{ customer.default.address.zip }}" required>
                    </div>
                  </div>

                  <button type="button" class="form__submit button button--primary" data-action="estimate-shipping">{{ 'cart.shipping_estimator.estimate' | t }}</button>

                  <div class="shipping-estimator__results rte" style="display: none;"></div>
                </div>
              </div>

            </div>
          </div>
          {%- endif -%}
        </div>
      </div>

    </div>   
  
  {% endunless %}
  
</section>

<style>
/*   body {overflow-x: hidden;} */
  .sticky-f .product-form__error {display: none;opacity: 0;height: 0!Important;}
/*   #shopify-section-header {position: initial;} */
  @media screen and (max-width:640px){
    div#abc-button {position: absolute;bottom: 49px;width: 200px;left: -65px;}
  }
  @media screen and (max-width:480px) {
    .noclick {webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-touch-callout: none;width: auto;height: auto;}
    .pswp {z-index: 9999999;}
    .pswp__bg{background: #ffffff;}
    .pswp__counter{
      position: fixed;
      top: 0;
      right: 0;
      color: #333333;
      font-size: 12px;
      line-height: 30px;
      white-space: nowrap;
      border: 1px solid #d4d6d8;
      border-radius: 50px;
      width: 60px;
      text-align: center;
      top: auto;
      bottom: 15px;
      left: 0;
      right: 0;
      margin: 0 auto;
      padding: 1px 13px;
      height: auto;
      opacity: 1;
      background: #ffffff;
    }
    .pswp__button--close{
      color: #333333;
      text-align: center;
      padding-right: 0;
      width: 35px;
      height: 35px;
      border: 1px solid #d4d6d8;
      border-radius: 100%;
      right: 20px;
      position: fixed;
      line-height: 5px;
      margin: 0 auto;
      z-index: 99999;
      top: 20px;
      font-style: normal;
      font-size: 28px;
      background: #ffffff;
      opacity: 1;
    }
    .pswp__button--share, .pswp__button--fs {display:none !important;}
    .pswp__top-bar {background-color: transparent;}
    .pswp__button--close {background-image: none !important;}
    .pswp--touch .pswp__button--arrow--left, .pswp--touch .pswp__button--arrow--right{
      position: absolute;
      content: "";
      width: 50px;
      height: 50px;
      border: 1px solid #d4d6d8;
      border-radius: 100%;
      background: #fff;
      opacity: 1;
      -webkit-transform: scale(0.75);
      transform: scale(0.75);
      margin-top: -30px;
    }
    .pswp--touch .pswp__button--arrow--left:before {
      content: "";
      position: absolute;
      left: -5px;
      top: -17px;
      display: block;
      width: 12px;
      height: 12px;
      border-bottom: 3px solid #333333;
      border-right: 3px solid #333333;
      -webkit-transform: rotate(135deg);
      -ms-transform: rotate(135deg);
      transform: rotate(135deg);
      opacity: 1;
      border-top: none;
      border-left: none;
      margin-top: 35px;
      margin-left: 25px;
      background-color: transparent;
    }
    .pswp--touch .pswp__button--arrow--right:before {
      content: "";
      position: absolute;
      left: -20px;
      display: block;
      width: 12px;
      height: 12px;
      border-top: 3px solid #333333;
      border-left: 3px solid #333333;
      -webkit-transform: rotate(135deg);
      -ms-transform: rotate(135deg);
      transform: rotate(135deg);
      opacity: 1;
      border-bottom: none;
      border-right: none;
      top: -17px;
      margin-top: 35px;
      margin-left: 35px;
      background-color: transparent;
    }
    .pswp--touch .pswp__button--arrow--left, .pswp--touch .pswp__button--arrow--right {visibility: visible;}
    .pswp--svg .pswp__button, .pswp--svg .pswp__button--arrow--left:before, .pswp--svg .pswp__button--arrow--right:before {background-image: none !important;}
    .pswp__ui--hidden .pswp__top-bar,
    .pswp__ui--hidden .pswp__caption,
    .pswp__ui--hidden .pswp__button--arrow--left,
    .pswp__ui--hidden .pswp__button--arrow--right {opacity: 1 !important; }
  }
</style>

<script>
  window.ShopifyXR=window.ShopifyXR||function(){(ShopifyXR.q=ShopifyXR.q||[]).push(arguments)};
  ShopifyXR('addModels', {{ product.media | where: 'media_type', 'model' | json }});

  // We save the ID of the product in the local storage, as it can be used by the "recently viewed products" section
  (() => {
    let items = JSON.parse(localStorage.getItem('recentlyViewedProducts') || '[]');

    // We check if the current product already exists, and if it does not, we add it at the start
    if (!items.includes({{ product.id | json }})) {
      items.unshift({{ product.id | json }});
    }

    // Then, we save the current product into the local storage, by keeping only the 18 most recent
    try {
      localStorage.setItem('recentlyViewedProducts', JSON.stringify(items.slice(0, 18)));
    } catch (error) {
      // Do nothing, this may happen in Safari in incognito mode
    }
  })();
</script>

<script>
  var mobileView=window.matchMedia("(max-width: 480px)");
  if(mobileView.matches){
    var container = [];
    $('.product-gallery__carousel').find('.product-gallery__carousel-item').each(function(){
      var $link = $(this).find('a'),
          item = {
            src: $link.attr('href'),
            w: $link.data('width'),
            h: $link.data('height')
          };
      container.push(item);
    });
    // Define click event on gallery item
    $('a.noclick').click(function(event){
      // Prevent location change
      event.preventDefault();
      $('body').addClass('no-mobile-scroll');
      // Define object and gallery options
      var $pswp = $('.pswp')[0],
          options = {
            index: $(this).parent('.product-gallery__carousel-item').index(),
            bgOpacity: 1,
            showHideOpacity: false,
            preloaderEl: true,
            tapToToggleControls: false,
            closeOnVerticalDrag: true
          };
      // Initialize PhotoSwipe
      var gallery = new PhotoSwipe($pswp, PhotoSwipeUI_Default, container, options);
      gallery.init();
      gallery.listen('close', function() { $('body').removeClass('no-mobile-scroll'); });
    });
  }
  $('.noclick').click(function(e){
    var mobileView=window.matchMedia("(min-width: 481px)");
    if(mobileView.matches){
      e.preventDefault();
      return false;
    }
  });

  $(".askquestion").click(function() {
    StampedFn.toggleForm('question', '{{product.id}}');
                         return false;
                         });
    $( ".writereview" ).click(function() {
      StampedFn.toggleForm('review','{{product.id}}');
                           return false;
                           });
      $( "#atuatc" ).click(function() {
        $('.gatc').click();
      });
      var avai = $(".product-form__info-item.bora").html();
      $(".availability_1").append(avai);
      //$("#JotFormIFrame-210895543727060").attr("page-url",window.location.href);
      //var iframe_src = $("#JotFormIFrame-210895543727060").attr("src");
      //var updated_src = iframe_src + '&pageUrl='+ window.location.href.substr(0,window.location.href.indexOf('?variant='));
      //$("#JotFormIFrame-210895543727060").attr("src",updated_src);
      var qty = 1;
      $( ".product-form__quantity" ).change(function() {
        qty = $(this).val();
        var iframe_src = jQuery("#JotFormIFrame-210895543727060").attr("src");
        var updated_src = iframe_src.replace('?','?pageUrl='+ window.location.href.substr(0,window.location.href.indexOf('?variant=')) +'&qty='+qty+'&');
        jQuery("#JotFormIFrame-210895543727060").attr("src",updated_src);
      });
      var iframe_src = $("#JotFormIFrame-210895543727060").attr("src");
      var updated_src = iframe_src.replace('?','?pageUrl='+ window.location.href.substr(0,window.location.href.indexOf('?variant=')) +'&qty='+qty+'&');
      $("#JotFormIFrame-210895543727060").attr("src",updated_src);

      $(document).ready(function() {
        var pvariant_id = jQuery(".select-wrapper select").val();
        var addonlength = jQuery(".addon-product-list > li."+pvariant_id).length;
        if(addonlength > 0){
          jQuery('.product-add-on-section').show();
        }else{
          jQuery('.product-add-on-section').hide();
        }
        $('.add-on-btn, .add-onclose-btn').click(function() {
          $('body.template-product').toggleClass('add-on-drawerr');
          $('html').toggleClass('fixed-add-on-drawerr');
          $(this).toggleClass('active');
          $(this).closest('.product').find('.add-on-drawer-right').toggleClass('add-on-drawer-open');
          $(this).closest('.product').find('.overlay').toggleClass('open');
        });

        $('.add-on-drawer-right .select-btn a').click(function(e) {
          e.preventDefault();
          $(this).closest('.product').find(".add-on-checkbox-label input[type='checkbox']").prop("checked", true);
          $(this).closest('.product').find(".add-onclose-btn").trigger("click");
        });

        $(document).click(function(e) {
          if($('.add-on-drawer').hasClass('add-on-drawer-open'))
            if ($(e.target).attr('class').indexOf('add-on-drawer') == -1 && !$('.add-on-drawer').find(e.target).length && $(e.target).attr('class').indexOf('add-on-title')== -1) {
              $('body.template-product').toggleClass('add-on-drawerr');
              $('html').toggleClass('fixed-add-on-drawerr');
              $('.add-on-drawer[class*=add-on-drawer-open]').toggleClass('add-on-drawer-open');
              $('.overlay').removeClass('open');
            }
        });

        $(document).on("click",".product-add-on-section h3",function() {
          console.log('addonFunction');
          var stories= [],variant_id,pro_quantity=0,dataQuantity=[];
          //$(".product-form__add-button[data-action='add-to-cart']").click(function() {
          $('.add-on-access-checkbox').each(function(){
            if($(this).is(':checked')){
              variant_id =  $(this).val();
              //console.log(variant_id);
              stories.push(variant_id);
            }
          });
          pro_quantity = 1;
          stories.map(function(item,index){
            dataQuantity.push({quantity:1,id :item});
          });
          data = {
            items: dataQuantity
          }
          console.log(data);
          jQuery.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: data,
            dataType: 'json',
            success: function() {
              //console.log("success");
              //$('.add-on-access-checkbox').prop('checked', false);
            }
          });
          //console.log(pro_quantity);
        });

      });
</script>
<div data-rebuy-id="18161" data-rebuy-shopify-product-ids="{{ product.id }}"></div>

{% comment %}
  ------------------------------------------------------------------------------
  Product Data. This must be outputted for all products (including home page).

  IMPORTANT: THIS CODE IS VITAL. DO NOT EDIT IT NOT REMOVE IT. MAKE SURE TO KEEP
  THE EXACT SAME ATTRIBUTES.
  ------------------------------------------------------------------------------
  {% endcomment %}

{%- assign variant_selector_block = section.blocks | where: 'type', 'variant_selector' | first -%}

<!-- ESC NBIS code refresh -->

<script>
setTimeout(function() {
const buttons_var = document.querySelectorAll('.block-swatch__item');

for (const button_var of buttons_var) {
  button_var.addEventListener('click', function(event) {
      window.esc_now_back_in_stock.triggerRefresh();
  })
}
}, 1000);
</script>

  <script type="application/json" data-product-json>
    {
      "product": {{ product | json }},
      "options_with_values": {{ product.options_with_values | json }},
      "selected_variant_id": {{ selected_variant.id }}
     {%- if variant_selector_block.settings.show_inventory_quantity -%}
        ,"inventories": {
          {%- for variant in product.variants -%}
            {%- if variant.available -%}
              {%- if variant.inventory_management and variant.inventory_policy == 'deny' and variant_selector_block.settings.low_inventory_threshold > 0 -%}
                {%- if variant.inventory_quantity <= variant_selector_block.settings.low_inventory_threshold -%}
                  {%- capture inventory_message -%}{{ 'product.form.low_stock_with_quantity_count' | t: count: variant.inventory_quantity }}{%- endcapture -%}
                {%- else -%}
                  {%- capture inventory_message -%}{{ 'product.form.in_stock_with_quantity_count' | t: count: variant.inventory_quantity }}{%- endcapture -%}
                {%- endif -%}
              {%- else -%}
                {%- capture inventory_message -%}{{ 'product.form.in_stock' | t }}{%- endcapture -%}
              {%- endif -%}
            {%- else -%}
              {%- capture inventory_message -%}{{ 'product.form.sold_out' | t }}{%- endcapture -%}
            {%- endif -%}

            "{{ variant.id }}": {
              "inventory_management": {{ variant.inventory_management | json }},
              "inventory_policy": {{ variant.inventory_policy | json }},
              "inventory_quantity": {{ variant.inventory_quantity | json }},
              {% if  variant.metafields.specs.shipping != blank %}
              "inventory_shipping": {{ variant.metafields.specs.shipping | json }},
              {% endif %}
               {% if  variant.metafields.specs.Warranty != blank %}
              "inventory_Warranty": {{ variant.metafields.specs.Warranty | json }},
              {% endif %}
               {% if  variant.metafields.specs.Warranty != blank %}
              "inventory_Coverage": {{ variant.metafields.specs.Warranty | json }},
              {% endif %}
               {% if  variant.metafields.specs.buyback_guarantee != blank %}
              "inventory_buyback_guarantee": {{ variant.metafields.specs.buyback_guarantee | json }},
              {% endif %}
              {% if  variant.metafields.price_option.hide_price != blank %}
              "inventory_hideprice": {{ variant.metafields.price_option.hide_price | json }},
              {% endif %}
              {% if  variant.metafields.specs.moneyback_guarantee != blank %}
              "inventory_moneyback_guarantee": {{ variant.metafields.specs.moneyback_guarantee | json }},
              {% endif %}
              
              "inventory_message": {{ inventory_message | json }}
            }{% unless forloop.last %},{% endunless %}
          {%- endfor -%}
        }
      {%- endif -%}
    }
  </script>
  <script id="instantload-script">
    setTimeout(function(){
      StampedFn.loadWidget(true);
      StampedFn.loadBadges(true);
      StampedFn.loadDisplayWidgets(true);
    }, 1000);
  </script> 

{% schema %}
{
  "name": "Product",
  "blocks": [
    {
      "type": "product_meta",
      "name": "Product meta",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "Show vendor",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_sku",
          "label": "Show SKU",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_reviews_badge",
          "label": "Show product rating",
          "info": "To display a rating, add a product rating app. [Learn more](https://help.shopify.com/en/manual/products/product-reviews/installation)",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_share_buttons",
          "label": "Show share buttons",
          "default": true
        }
      ]
    },
    {
      "type": "variant_selector",
      "name": "Variant selector",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "selector_mode",
          "label": "Selector type",
          "options": [
            {
              "value": "block",
              "label": "Block"
            },
            {
              "value": "dropdown",
              "label": "Dropdown"
            }
          ],
          "default": "block"
        },
        {
          "type": "select",
          "id": "color_mode",
          "label": "Color selector type",
          "info": "Variant image mode requires that all variant has an associated image. [Learn more](https://help.shopify.com/en/manual/products/product-variant-images#add-images-to-existing-variants)",
          "options": [
            {
              "value": "block",
              "label": "Block"
            },
            {
              "value": "dropdown",
              "label": "Dropdown"
            },
            {
              "value": "color",
              "label": "Color swatch"
            },
            {
              "value": "variant_image",
              "label": "Variant image"
            }
          ],
          "default": "color"
        },
        {
          "type": "checkbox",
          "id": "show_quantity_selector",
          "label": "Show quantity selector",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_taxes_included",
          "label": "Show price taxes notice",
          "default": false
        },
        {
          "type": "header",
          "content": "Inventory"
        },
        {
          "type": "paragraph",
          "content": "You can also add a stock countdown. [Learn more](https://support.maestrooo.com/article/177-product-show-an-stock-countdown-bar)."
        },
        {
          "type": "checkbox",
          "id": "show_inventory_quantity",
          "label": "Show inventory quantity",
          "default": false
        },
        {
          "type": "range",
          "id": "low_inventory_threshold",
          "label": "Low inventory threshold",
          "info": "Use low stock color when quantity is below the threshold. Choose 0 to always show in stock.",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 0
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "Buy buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_payment_button",
          "label": "Show dynamic checkout button",
          "info": "Each customer will see their preferred payment method from those available on your store, such as PayPal or Apple Pay. [Learn more](https://help.shopify.com/manual/using-themes/change-the-layout/dynamic-checkout)",
          "default": true
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "paragraph",
          "content": "This text will appear on the right part of the page."
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Text"
        }
      ]
    },
    {
      "type": "store_pickup",
      "name": "Local pickup availability",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Show customers where they can pick up the product. [Learn more](https://help.shopify.com/en/manual/shipping/setting-up-and-managing-your-shipping/local-methods/local-pickup#show-pickup-availability-to-your-customers)"
        }
      ]
    },
    {
      "type": "description",
      "name": "Description",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "content",
      "name": "Content",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Content from page",
          "info": "If specified, takes precedence over inline content."
        },
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "liquid",
      "name": "Liquid",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "liquid",
          "id": "liquid",
          "label": "Liquid code",
          "default": "{{ product.title }}"
        },
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "reviews",
      "name": "Reviews",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "You need to install [Shopify's free Product Reviews](https://apps.shopify.com/product-reviews) app before enabling those options."
        }
      ]
    },
    {
      "type": "shipping_estimator",
      "name": "Shipping estimator",
      "settings": [
        {
          "type": "text",
          "id": "shipping_estimator_default_country",
          "label": "Default country",
          "info": "If the customer is logged in, the country of their shipping address will be used.",
          "default": "United States"
        },
        {
          "type": "checkbox",
          "id": "show_refunds_policy",
          "label": "Show refunds policy",
          "info": "Refund policy must be added into your store policies. [Learn more](https://help.shopify.com/manual/sell-online/checkout-settings/refund-privacy-tos).",
          "default": true
        }
      ]
    },
    {
      "type": "trust",
      "name": "Trust content",
      "settings": [
        {
          "type": "text",
          "id": "trust_title",
          "label": "Heading",
          "default": "Payment & Security"
        },
        {
          "type": "checkbox",
          "id": "show_payment_icons",
          "label": "Show payment icons",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "custom_security_badge",
          "label": "Security badge",
          "info": "800 x 200px .jpg recommended"
        },
        {
          "type": "range",
          "id": "custom_security_badge_width",
          "min": 100,
          "max": 500,
          "step": 10,
          "unit": "px",
          "label": "Security badge width",
          "default": 200
        }
      ]
    },
    {
      "type": "@app"
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "paragraph",
      "content": "Learn more about [media types](https://help.shopify.com/en/manual/products/product-media)"
    },
    {
      "type": "select",
      "id": "image_size",
      "label": "Size",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "small"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_image_zoom",
      "label": "Enable image zoom",
      "default": true
    },
    {
      "type": "select",
      "id": "zoom_effect",
      "label": "Desktop zoom effect",
      "options": [
        {
          "value": "inside",
          "label": "Inside"
        },
        {
          "value": "outside",
          "label": "Outside"
        }
      ],
      "default": "outside"
    },
    {
      "type": "select",
      "id": "carousel_effect",
      "label": "Transition effect",
      "options": [
        {
          "value": "fade",
          "label": "Fade"
        },
        {
          "value": "slide",
          "label": "Slide"
        }
      ],
      "default": "fade"
    }
  ]
}
{% endschema %}